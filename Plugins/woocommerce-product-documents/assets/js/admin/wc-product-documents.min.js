"use strict";jQuery(document).ready(function(n){function e(){n(".wc-product-documents-sections .wc-product-documents-section").each(function(t,c){n(".product-documents-section-position",c).val(parseInt(n(c).index(".wc-product-documents-sections .wc-product-documents-section"),10))})}function o(){var t=n("input:radio[name=product_documents_default_section]");!1===t.is(":checked")&&t.filter("[value=0]").prop("checked",!0)}function s(t){n(".wc-product-documents .wc-product-document",t).each(function(t,c){n(".wc-product-document-position",c).val(parseInt(n(c).index(".wc-product-documents .wc-product-document"),10))})}var c,u;function d(){n("#wc-product-documents-data .wc-product-documents-set-file").on("click",function(t){t.preventDefault(),u=n(t.target).closest("tr"),c||(c=wp.media.frames.file_frame=wp.media({title:wc_product_documents_admin_params.select_file_text,button:{text:wc_product_documents_admin_params.set_file_text},multiple:!1})).on("select",function(){var t=c.state().get("selection").first().toJSON();n("input.wc-product-document-file-location",u).val(t.url)}),c.open()})}n("#wc-product-documents-data .wc-metaboxes-wrapper").on("click",".expand_all",function(){return n(this).closest(".wc-metaboxes-wrapper").find(".wc-metabox > .wc-metabox-content").show(),!1}).on("click",".close_all",function(){return n(this).closest(".wc-metaboxes-wrapper").find(".wc-metabox > .wc-metabox-content").hide(),!1}),n("#wc-product-documents-data").on("click",".add-new-product-documents-section",function(){var c=-1;n(".wc-product-documents-sections .wc-product-documents-section .product-documents-section-index").each(function(){var t=parseInt(n(this).val(),10);c=c<t?t:c}),c++;var t=wc_product_documents_admin_params.new_section.replace(/{index}/g,c);return n(".wc-product-documents-sections").append(t),e(),o(),!1}).on("click",".remove-wc-product-documents-section",function(){var t;return confirm(wc_product_documents_admin_params.confirm_remove_section_text)&&(t=n(this).closest(".wc-product-documents-section"),n(t).remove(),e(),o()),!1}),n(".wc-product-documents-sections").sortable({items:".wc-product-documents-section",cursor:"move",axis:"y",handle:"h3",scrollSensitivity:40,helper:function(t,c){return c},start:function(t,c){c.item.css("border-style","dashed")},stop:function(t,c){c.item.removeAttr("style"),e()}}),n("#wc-product-documents-data").on("click",".wc-product-documents-add-document",function(){var t=n(this).closest(".wc-product-documents-section"),c=n(".product-documents-section-index",t).val(),e=-1;n(".wc-product-document .wc-product-document-sub-index",t).each(function(){var t=parseInt(n(this).val(),10);e=e<t?t:e}),e++;var o=wc_product_documents_admin_params.new_document.replace(/{index}/g,c).replace(/{sub_index}/g,e);return n(this).closest(".wc-product-documents").append(o),s(t),d(),!1}).on("click",".wc-product-documents-remove-document",function(){var t;return confirm(wc_product_documents_admin_params.confirm_remove_document_text)&&(t=n(this).closest(".wc-product-documents-section"),n(this).closest(".wc-product-document").remove(),s(t)),!1}),n("table.wc-product-documents tbody").sortable({items:"tr",cursor:"move",axis:"y",handle:"td",scrollSensitivity:40,helper:function(t,c){return c},start:function(t,c){c.item.css("background-color","#f6f6f6")},stop:function(t,c){c.item.removeAttr("style"),s()}}),d()});